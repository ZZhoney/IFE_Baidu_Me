<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<ul id="source">
    <li>北京空气质量：<b>90</b></li>
    <li>上海空气质量：<b>70</b></li>
    <li>天津空气质量：<b>80</b></li>
    <li>广州空气质量：<b>50</b></li>
    <li>深圳空气质量：<b>40</b></li>
    <li>福州空气质量：<b>32</b></li>
    <li>成都空气质量：<b>90</b></li>
  </ul>

  <ul id="resort">
    <!-- 
    <li>第一名：北京空气质量：<b>90</b></li>
    <li>第二名：北京空气质量：<b>90</b></li>
    <li>第三名：北京空气质量：<b>90</b></li>
     -->

  </ul>

  <button id="sort-btn">排序</button>

  <script type="text/javascript">
  var arr=[
  	"一",
  	"二",
  	"三",
  	"四",
  	"五",
  	"六",
  	"七"
  ];
	function getData() {
		var ul=document.getElementById('source');
	    var liList=ul.querySelectorAll('li');
		//var liList=ul.childNodes;//获取到的不止是li还有换行符
		var data=[];
		for(let i=0;i<liList.length;i++)
		{
			str=liList[i].innerText;
			if(str){
				 city=str.split("：")[0];
				 tem=str.split("：")[1];
				 city=city.slice(0,city.length-4);
				 data[i]=[city,tem];
			}
	    }
	   return data;
	};


	function sortAqiData(data) {
		data.sort((a,b)=>{
			return a[1]-b[1];
		})
		return data;
	}


	function render(data) {
		var resortul=document.getElementById('resort');
		data.forEach((item,index)=>{
			var b=document.createElement('b');
			b.innerHTML=item[1];
			var li=document.createElement('li');
			li.innerHTML="第"+arr[index]+"名："+item[0]+"空气质量：";
			li.appendChild(b);
			resortul.appendChild(li);

		})
	}

	function btnHandle() {
	   var resortul=document.getElementById('resort');
	   var liLis=resortul.querySelectorAll('li');
	   if(liLis.length==0){
	   	 var aqiData = getData();
	     aqiData = sortAqiData(aqiData);
	     render(aqiData);
	   }
	   return ;
	   
    }

	function init() {
		 var btn=document.getElementById('sort-btn');
		 btn.addEventListener('click',btnHandle);

     }

	init();
</script>
</body>
</html>